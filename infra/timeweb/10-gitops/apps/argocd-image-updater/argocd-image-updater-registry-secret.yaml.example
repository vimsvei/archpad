# Шаблон Secret для credentials Container Registry TimeWeb
# 
# ИНСТРУКЦИЯ:
# 1. Скопируйте этот файл в argocd-image-updater-registry-secret.yaml
# 2. Замените <REGISTRY_USERNAME> и <REGISTRY_PASSWORD> на реальные значения
# 3. Примените манифест: kubectl apply -f argocd-image-updater-registry-secret.yaml
#
# ИЛИ создайте Secret вручную:
# kubectl create secret docker-registry archpad-registry-secret \
#   --docker-server=archpad-cr.registry.twcstorage.ru \
#   --docker-username=<REGISTRY_USERNAME> \
#   --docker-password=<REGISTRY_PASSWORD> \
#   --namespace=argocd

apiVersion: v1
kind: Secret
metadata:
  name: archpad-registry-secret
  namespace: argocd
  labels:
    app.kubernetes.io/name: argocd-image-updater
    app.kubernetes.io/part-of: argocd
  annotations:
    argocd.argoproj.io/sync-wave: "5"
type: kubernetes.io/dockerconfigjson
data:
  # Замените на base64 encoded .dockerconfigjson
  # Формат: {"auths":{"archpad-cr.registry.twcstorage.ru":{"username":"<USERNAME>","password":"<PASSWORD>","auth":"<BASE64(username:password)>"}}}
  # 
  # Для создания используйте:
  # echo -n '{"auths":{"archpad-cr.registry.twcstorage.ru":{"username":"<USERNAME>","password":"<PASSWORD>","auth":"'$(echo -n '<USERNAME>:<PASSWORD>' | base64)'"}}}' | base64
  .dockerconfigjson: <BASE64_ENCODED_DOCKERCONFIGJSON>
