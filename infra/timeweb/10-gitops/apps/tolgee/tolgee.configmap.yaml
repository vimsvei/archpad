apiVersion: v1
kind: ConfigMap
metadata:
  name: tolgee
  namespace: platform
  annotations:
    argocd.argoproj.io/sync-wave: "50"
data:
  config.yaml: |
    tolgee:
      postgres:
        autoconfigure: false
        enabled: false
      authentication:
        enabled: true
      contentDelivery:
        allowedOrigins:
          - https://portal.archpad.pro
          - https://i18n.archpad.pro
    server:
      port: 8080
    spring:
      datasource:
        # Используем переменные окружения для подключения к внешней PostgreSQL
        # Эти переменные устанавливаются через Vault Agent Injector
        url: ${SPRING_DATASOURCE_URL}
        username: ${SPRING_DATASOURCE_USERNAME}
        password: ${SPRING_DATASOURCE_PASSWORD}